<!DOCTYPE html>
<html>
<head>
    <title>Пример интеграции Яндекс карт</title>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
    <script src="http://api-maps.yandex.ru/2.0.31/?lang=ru-RU&load=package.full,regions,geoObject.OverlayFactory,geometry.pixel.Polygon" type="text/javascript"></script>
    <script src="js/mask-overlay.js" type="text/javascript"></script>
    <script type="text/javascript">
        ymaps.ready(init);
        var myMap,
		    events;



        function init(){
            myMap = new ymaps.Map ("map", {
                center:     [69.642513,105.386271],
                zoom: 3,
                behaviors: ['drag', 'scrollZoom']
            });
			/*myMap.behaviors.disable('drag');*/
			/* Зарегистрирован обработчик события 'Регионы загружены' */
			events = new ymaps.event.Manager();
			events.add('regionLoaded', onRegionLoaded);

            ymaps.regions.load('RU', {
                lang: 'ru',
                quality: 0
            }).then(function (result) {
				var regions = result.geoObjects;
				regions.events.add('mouseenter', function (e) {
					var region = e.get('target');
					console.log(region.options.get("fillColor"));
					region.options.set({fillColor: "FFCC99"});
				});
				regions.events.add('mouseleave', function (e) {
					var region = e.get('target');
					region.options.set({fillColor: "0066ff99"});
				});
				myMap.geoObjects.add(regions);

				events.fire('regionLoaded', {
					regions: regions
				});
            }, function () {
            	console.log('No response !!!!!!!!!!!!!!!!!!!!!!!!!!!');
            });

			var myPlacemark = new ymaps.Placemark([65.811204, 128.995227], {
				iconContent: '43'
			}, {
				// Options
				// The placemark icon will stretch to fit the content
				preset: 'twirl#blueStretchyIcon'
			});
/*
					,myGeoObject = new ymaps.GeoObject({
						// Geometry = object type + geographical coordinates of the object
						geometry: {
							// Geometry type - point
							type: 'Point',
							// Point coordinates.
							coordinates: [37.967265, 32.798875]
						},
						// Properties
						properties: {
							// Placemark content.
							iconContent: 'Placemark 2'
						}
					}, {
						// Options
						// The placemark icon will stretch to fit the content
						preset: 'twirl#pinkStretchyIcon'
					});
*/

			myMap.geoObjects
					.add(myPlacemark);
        }

		/* callback для события 'Регионы загружены' */
		function onRegionLoaded(data) {
			renderMask(data);
		}

		/* Отрисовка тумана (т.е. оставить на карте только Россию) */
		function renderMask(data) {
			/* координаты отображаемого многоугольника на карте */
			var coordinates = [];
			data.get('regions')
					.each(function (geoObject) {
						coordinates.push.apply(coordinates, geoObject.geometry.getCoordinates());
					});
			var geometry = new ymaps.geometry.Polygon(coordinates, 'evenOdd',{
				projection: myMap.options.get('projection')
			});
			geometry.setMap(myMap);

			var overlay = new MaskOverlay(geometry.getPixelGeometry(), null, getDefaults());
			overlay.setMap(myMap);
			overlay.setGeometry(geometry);

		}

		function getDefaults () {
			return {
				zIndex: 1,
				stroke: false,
				strokeColor: false,
				fillColor: 'FFF'
			};
		}

	</script>
    <style type="text/css">
        #map {
            width: auto;
            height: 700px;
        }
    </style>
</head>
<body>
<div id="map"></div>
</body>
</html>