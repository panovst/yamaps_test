<!DOCTYPE html>
<html>
<head>
    <title>Пример интеграции Яндекс карт</title>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
    <script src="http://api-maps.yandex.ru/2.0.31/?lang=ru-RU&load=package.full,regions,geoObject.OverlayFactory,geometry.pixel.Polygon" type="text/javascript"></script>
    <script src="js/mask-overlay.js" type="text/javascript"></script>
    <script src="js/ru/mig/gen_color.js" type="text/javascript"></script>
    <script src="js/ru/mig/osm_geonames.js" type="text/javascript"></script>
    <script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        ymaps.ready(init);
        var myMap,
		    events,
			fillColor_inactive = "#FFFF4D",
			fillColor_active = "FFCC99";
		var colorGenerator = new ColorGenerator();

        function init(){
            myMap = new ymaps.Map ("map", {
                center:     [69.642513,105.386271],
                zoom: 3
                /*behaviors: ['scrollZoom']*/
            });
			myMap.behaviors.disable('drag');
			/* Зарегистрирован обработчик события 'Регионы загружены' */
			events = new ymaps.event.Manager();
			events.add('regionLoaded', onRegionLoaded);

            ymaps.regions.load('RU', {
                lang: 'ru',
                quality: 0
            }).then(function (result) {
				var regions = result.geoObjects;
				regions.each(function (reg) {
					var color = colorGenerator.getColor();
					reg.options.set({fillColor: color});
					reg.options.set({xfillColor: color});

					var geoname = osmGeonames.matched[reg.properties.get('osmId')];
					if (geoname) {
						var myPlacemark = new ymaps.Placemark([geoname.lat, geoname.lng], {
							iconContent: '43'
						}, {
							// Options
							// The placemark icon will stretch to fit the content
							preset: 'twirl#blueStretchyIcon'
						});
						myMap.geoObjects.add(myPlacemark);
					}

				});
				regions.events.add('mouseenter', function (e) {
					var region = e.get('target');
					region.options.set({fillColor: fillColor_active});
				});
				regions.events.add('mouseleave', function (e) {
					var region = e.get('target');
					region.options.set({fillColor: region.options.get('xfillColor')});
				});
				myMap.geoObjects.add(regions);

				events.fire('regionLoaded', {
					regions: regions
				});
            }, function () {
            	console.log('No response !!!!!!!!!!!!!!!!!!!!!!!!!!!');
            });

/*
					,myGeoObject = new ymaps.GeoObject({
						// Geometry = object type + geographical coordinates of the object
						geometry: {
							// Geometry type - point
							type: 'Point',
							// Point coordinates.
							coordinates: [37.967265, 32.798875]
						},
						// Properties
						properties: {
							// Placemark content.
							iconContent: 'Placemark 2'
						}
					}, {
						// Options
						// The placemark icon will stretch to fit the content
						preset: 'twirl#pinkStretchyIcon'
					});
*/



        }

		/* callback для события 'Регионы загружены' */
		function onRegionLoaded(data) {
			renderMask(data);
		}

		/* Отрисовка тумана (т.е. оставить на карте только Россию) */
		function renderMask(data) {
			/* координаты отображаемого многоугольника на карте */
			var coordinates = [];
			data.get('regions')
					.each(function (geoObject) {
						coordinates.push.apply(coordinates, geoObject.geometry.getCoordinates());
					});
			var geometry = new ymaps.geometry.Polygon(coordinates, 'evenOdd',{
				projection: myMap.options.get('projection')
			});
			geometry.setMap(myMap);

			var overlay = new MaskOverlay(geometry.getPixelGeometry(), null, getDefaults());
			overlay.setMap(myMap);
			overlay.setGeometry(geometry);

		}

		function getDefaults () {
			return {
				zIndex: 1,
				stroke: false,
				strokeColor: false,
				fillColor: 'FFF'
			};
		}

	</script>
    <style type="text/css">
        #map {
            width: auto;
            height: 700px;
        }
    </style>
</head>
<body>
<div id="map"></div>
</body>
</html>