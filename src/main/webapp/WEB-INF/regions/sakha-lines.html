<!--
	Ссылки:
	Yandex API
	http://api.yandex.ru/maps/doc/jsapi/2.x/ref/reference/geometry.LineString.xml

	PostGIS
	http://postgis.net/docs/manual-2.1/
	http://postgis.net/docs/manual-2.1/ST_Summary.html
	http://postgis.refractions.net/docs/ST_Intersection.html
	http://postgis.net/docs/manual-2.1/ST_IsClosed.html
	http://postgis.net/docs/manual-2.1/ST_IsRing.html
-->
<!DOCTYPE html>
<html>
<head>
    <title>Пример интеграции Яндекс карт</title>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
    <script src="http://api-maps.yandex.ru/2.0.31/?lang=ru-RU&load=package.full,regions,geoObject.OverlayFactory,geometry.pixel.Polygon" type="text/javascript"></script>
    <script src="../js/mask-overlay.js" type="text/javascript"></script>
    <script src="../js/ru/mig/Map.js" type="text/javascript"></script>
    <script src="../js/ru/mig/gen_color.js" type="text/javascript"></script>
    <script src="../js/ru/mig/osm_geonames.js" type="text/javascript"></script>
    <script src="../js/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        ymaps.ready(init);
        var myMap;

        function init(){
            myMap = new Map(getMapOptions()).loadMap();
			var myPolyline = new ymaps.Polyline(
					[[57.1486968994141,131.434783935547],[57.1226844787598,131.358779907227],[57.1085205078126,131.274490356445],[57.0707893371583,131.178985595703],[57.0311470031739,131.082794189453],[57.0041809082032,130.965682983398],[56.9734306335449,130.862487792969],[56.9346656799318,130.747085571289],[56.9001998901368,130.669281005859],[56.8693313598634,130.597091674805],[56.8662528991699,130.519683837891],[56.8905067443848,130.434982299805],[56.9223823547364,130.379180908203],[56.9478492736816,130.336196899414],[56.9499206542969,130.289184570312],[56.9265899658203,130.265380859375],[56.8832664489747,130.271987915039],[56.864486694336,130.234680175781],[56.8812217712403,130.189788818359],[56.9279098510742,130.150680541992],[56.9617462158204,130.141494750977],[56.9831161499024,130.10578918457],[57.0331878662111,129.942184448242],[57.0497055053712,129.805862426758],[57.0563278198242,129.692001342773],[57.0618362426758,129.5380859375],[57.0570259094239,129.364288330078],[57.0296859741212,129.186996459961],[57.0052757263184,129.058166503906],[57.0065689086915,128.983581542969],[57.0302047729492,128.871490478516],[57.0610160827637,128.737380981445],[57.0880317687988,128.585388183594],[57.094882965088,128.507400512695],[57.0844993591309,128.471694946289],[57.0532150268556,128.443481445313],[57.0194091796876,128.438201904297],[56.9801483154298,128.393280029297],[56.9658164978027,128.340484619141],[56.9640579223633,128.239883422852],[56.9866027832032,128.187591552734],[57.0132026672364,128.139282226563],[57.0347595214844,128.053192138672],[57.0383911132812,127.945182800293],[57.0760154724121,127.896095275879],[57.0921173095704,127.823677062988],[57.0909042358399,127.769485473633],[57.0679168701171,127.714492797852],[57.0336799621581,127.67748260498],[57.0234909057617,127.610275268555],[57.0629653930664,127.518089294434],[57.1530723571777,127.39599609375],[57.2299156188966,127.230682373047],[57.2868461608887,127.203384399414],[57.3375625610353,127.185783386231],[57.3798751831055,127.148277282715],[57.4021492004396,127.054382324219],[57.4216651916504,126.919486999512],[57.4205856323242,126.840187072754],[57.4479751586915,126.601600646973],[57.4847946166993,126.461669921875],[57.5221366882325,126.322593688965],[57.5517616271973,126.072082519531],[57.6072845458986,125.960487365723],[57.6234359741212,125.88468170166],[57.6554870605469,125.83129119873],[57.7138557434082,125.773994445801],[57.740924835205,125.720275878906],[57.7677078247071,125.667686462402],[57.7736015319824,125.606689453125],[57.7647819519043,125.545783996582],[57.7222175598146,125.495590209961],[57.6586608886719,125.428581237793],[57.6041069030763,125.374984741211],[57.5591011047364,125.327186584473],[57.529685974121,125.27059173584],[57.529899597168,125.208183288574],[57.5437774658204,125.131683349609],[57.5576858520509,125.097381591797],[57.5803222656251,125.073089599609],[57.5964317321778,125.009078979492],[57.5975646972657,124.941383361816],[57.5796394348145,124.870910644531],[57.5996513366699,124.757995605469],[57.6272659301758,124.645286560059],[57.6752395629883,124.586395263672],[57.7241821289064,124.551391601563],[57.758113861084,124.523086547852],[57.7890281677246,124.450973510742],[57.8089561462403,124.379684448242],[57.8442497253419,124.363891601563],[57.8704872131348,124.378883361816],[57.9093894958496,124.428588867188],[57.9630699157716,124.442680358887],[58.0148658752441,124.436592102051],[58.065528869629,124.441284179688],[58.0966415405274,124.476089477539],[58.1215133666993,124.542785644531],[58.1520500183106,124.600296020508],[58.1973571777344,124.612495422363],[58.2511596679688,124.645690917969],[58.3019943237305,124.693885803223],[58.3715667724611,124.75609588623],[58.4376068115234,124.830795288086],[58.4824867248536,124.894599914551],[58.5416717529298,124.900382995605],[58.5327301025392,124.827186584473],[58.5537757873536,124.734283447266],[58.5581817626953,124.69189453125],[58.5429573059081,124.620178222656],[58.5477027893068,124.495185852051],[58.5469932556152,124.413276672363],[58.5280570983888,124.355575561523],[58.4993209838868,124.363800048828],[58.4891128540039,124.416778564453],[58.4637107849122,124.437789916992],[58.4228858947754,124.357688903809],[58.3689002990723,124.2548828125],[58.3535232543945,124.193382263184],[58.3651046752929,124.11279296875],[58.3541717529298,124.022697448731],[58.3221817016601,123.920776367188],[58.2728309631349,123.777481079102],[58.2630271911621,123.608383178711],[58.267635345459,123.475288391113],[58.2864303588868,123.373992919922],[58.2927665710449,123.24577331543],[58.2727813720703,123.149688720703],[58.2536277770996,123.08088684082],[58.2180023193361,123.038383483887],[58.1728706359864,122.974182128906]]
			);

			console.log(ymaps.geometry.LineString.toEncodedCoordinates(new ymaps.geometry.LineString(myPolyline.geometry.getCoordinates())));
			myMap.addGeoObject(myPolyline);
		}

		function getMapOptions() {
			return {
				region_country_iso2: 'RU',
				region_country_lang: 'ru',
				region_quality: 0,
				region_randomFillColor: true,
				region_hover: true
			};
		}
	</script>
    <style type="text/css">
        #map {
            width: auto;
            height: 700px;
        }
    </style>
</head>
<body>
<div id="map"></div>
</body>
</html>